<!DOCTYPE html>
<html>
  <head>
    <style>
      body {background-color:rgb(56,56,56) }
      h1   {color:blue}
      p    {color:green}
    </style>
  </head>
<body>
  
  <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  
  <font size = "3" face="Times New Roman" color="white">What is your name?</font>
  <textarea cols="40" rows="8" name="searchingFor" id="searchingFor"></textarea>
  <br></br>
  
 <font size = "3" face="Times New Roman" color="white">Name of Slack channel; without # sign</font>
  <textarea cols="40" rows="8" name="searchingFor2" id="searchingFor2"></textarea>
  <br></br>
  
  <font size = "3" face="Times New Roman" color="white">What message do you want to send?</font>
  <textarea cols="40" rows="8" name="searchingFor3" id="searchingFor3"></textarea>
  <br></br>
  
  <font size = "3" face="Times New Roman" color="white">Here you can supply a URL for your icon</font>
  <textarea cols="40" rows="8" name="searchingFor4" id="searchingFor4"></textarea>
  <br></br>

  <button type="submit" id="b-cancel">Cancel</button>
  <button type="submit" id="b-submit">Submit</button>
</body>

<script>
      function saveOptions() {
        var options = {
              'name': document.getElementById("searchingFor").value,
              'channel' : document.getElementById("searchingFor2").value,
              'text' : document.getElementById("searchingFor3").value,
              'imageURL' : document.getElementById("searchingFor4").value
        }
        return options;
      }
      $().ready(function() {
       if (typeof window.localStorage !== "undefined") {
       	console.log("Not undefined :)");
        if (window.localStorage.pebble_doc2_weather_options) {
          ls_pto = JSON.parse(window.localStorage.pebble_doc2_weather_options);
            //Sober
            $("input[name=soberPhrase1]").val(ls_pto["soberPhrase1"]);
        }
       }
        $("#b-cancel").click(function() {
          console.log("Cancel");
          document.location = "pebblejs://close";
        });
        $("#b-submit").click(function() {
          console.log("Submit");
          ls_pto = JSON.stringify(saveOptions());
          if (typeof window.localStorage !== "undefined") {
            window.localStorage.pebble_doc2_weather_options = ls_pto;
          }
          var location = "pebblejs://close#" + encodeURIComponent(ls_pto);
          console.log("Warping to: " + location);
          console.log(location);
          document.location = location;
        });
      });
    </script>
</html>
